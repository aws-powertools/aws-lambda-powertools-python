---
title: Parameters utility
description: Utility
---

import Note from "../../src/components/Note"

The parameters utility provides a way to retrieve parameter values from [AWS Systems Manager Parameter Store](https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html), [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/) or [Amazon DynamoDB](https://aws.amazon.com/dynamodb/). It also provides a base class to create your parameter provider implementation.

**Key features**

* Retrieve one or multiple parameters from the underlying provider
* Cache parameter values for a given amount of time
  * By default, parameters are cached for 5 seconds
* Transform parameter values from JSON or base 64 encoded strings

## High-level functions

This utility provides high-level functions for quick use. These support both the AWS Systems Manager Parameter Store and AWS Secrets Manager.

```python:title=ssm.py
from aws_lambda_powertools.utilities import parameters

def handler(event, context):
    # Retrieve a single parameter
    value = parameters.get_parameter("/my/parameter")

    # Retrieve multiple parameters from a path prefix
    # This returns a dict with the parameter name as key
    values = parameters.get_parameters("/my/path/prefix")
    for k, v in values.items():
        print(f"{k}: {v}")
```

```python:title=secrets.py
from aws_lambda_powertools.utilities import parameters

def handler(event, context):
    # Retrieve a single secret
    value = parameters.get_secret("my-secret")
```

## Provider classes

Alternatively, you can use the provider classes, which give more flexibility, such as the ability to configure the underlying SDK client.

```python:title=dynamodb.py
from aws_lambda_powertools.utilities import parameters

dynamodb_provider = parameters.DynamoDBProvider(table_name="my-table")

def handler(event, context):
    # Retrieve a value from DynamoDB
    value = dynamodb_provider.get("my-parameter")

    # Retrieve multiple values by performing a Query on the DynamoDB table
    # This returns a dict with the sort key attribute as dict key.
    values = dynamodb_provider.get_multiple("my-hash-key")
    for k, v in values.items():
        print(f"{k}: {v}")
```

```python:title=ssm.py
from aws_lambda_powertools.utilities import parameters
from botocore.config import Config

config = Config(region_name="us-west-1")
ssm_provider = parameters.SSMProvider(config=config)

def handler(event, context):
    # Retrieve a single parameter
    value = ssm_provider.get("/my/parameter")

    # Retrieve multiple parameters from a path prefix
    values = ssm_provider.get_multiple("/my/path/prefix")
    for k, v in values.items():
        print(f"{k}: {v}")
```

```python:title=secrets.py
from aws_lambda_powertools.utilities import parameters
from botocore.config import Config

config = Config(region_name="us-west-1")
secrets_provider = parameters.SecretsProvider(config=config)

def handler(event, context):
    # Retrieve a single secret
    value = secrets_provider.get("my-secret")
```

## Transform values

You can transform the incoming values if they are storing in JSON or Base64 format using the `transform` argument for the `get()` and `get_multiple()` methods. This is also supported by the helper functions.

```python:title=transform.py
from aws_lambda_powertools.utilities import parameters

ssm_provider = parameters.SSMProvider()

def handler(event, context):
    # Transform a JSON string
    value_from_json = ssm_provider.get("/my/json/parameter", transform="json")

    # Transform a Base64 encoded string
    value_from_binary = ssm_provider.get("/my/binary/parameter", transform="binary")
```

## DynamoDB provider options

The Amazon DynamoDB provider supports four additional arguments at initialization:

* __table_name__ (mandatory): Name of the DynamoDB table containing the parameter values.
* __key_attr__: Hash key for the DynamoDB table, defaults to `id`.
* __sort_attr__: Range key for the DynamoDB table , defaults to `sk`. You don't need to set this if you don't use the `get_multiple()` method.
* __value_attr__: Name of the attribute containing the parameter value, defaults to `value`.

```python:title=dynamodb.py
from aws_lambda_powertools.utilities import parameters

dynamodb_provider = parameters.DynamoDBProvider(
    table_name="my-table",
    key_attr="MyKeyAttr",
    sort_attr="MySortAttr",
    value_attr="MyvalueAttr"
)

def handler(event, context):
    value = dynamodb_provider.get("my-parameter")
```

## Parameter Store provider options

The AWS Systems Manager Parameter Store provider supports two additional arguments for the `get()` and `get_multiple()` methods:

* **decrypt**: Will automatically decrypt the parameter.
* **recursive**: For `get_multiple()` only, will fetch all parameter values recursively based on a path prefix. Defaults to `True`.

```python:title=ssm.py
from aws_lambda_powertools.utilities import parameters

ssm_provider = parameters.SSMProvider()

def handler(event, context):
    decrypted_value = ssm_provider.get("/my/encrypted/parameter", decrypt=True)

    no_recursive_values = ssm_provider.get_multiple("/my/path/prefix", recursive=False)
```

## Partial transform failures with `get_multiple()`

If you use `transform` with `get_multiple()`, you can have a single malformed parameter value. To prevent failing the entire request, the method will return a `None` value for the parameters that failed to transform. You can override this by setting the `raise_on_transform_error` argument to `True`.

For example, if you have three parameters (*/param/a*, */param/b* and */param/c*) but */param/c* is malformed:

```python:title=partial_failures.py
from aws_lambda_powertools.utilities import parameters

ssm_provider = parameters.SSMProvider()

def handler(event, context):
    # This will display:
    # /param/a: [some value]
    # /param/b: [some value]
    # /param/c: None
    values = ssm_provider.get_multiple("/param", transform="json")
    for k, v in values.items():
        print(f"{k}: {v}")

    # This will raise a TransformParameterError exception
    values = ssm_provider.get_multiple("/param", transform="json", raise_on_transform_error=True)
```

## Passing arguments to the underlying SDK

You can use arbitrary keyword arguments to pass it directly to the underlying SDK method.

```python:title=ssm.py
from aws_lambda_powertools.utilities import parameters

secrets_provider = parameters.SecretsProvider()

def handler(event, context):
    # The 'VersionId' argument will be passed to the underlying get_secret_value() call.
    value = secrets_provider.get("my-secret", VersionId="e62ec170-6b01-48c7-94f3-d7497851a8d2")
```
